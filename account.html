<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRSS | My Account</title>
    <link rel="stylesheet" href="account.css">
    <link rel="icon" type="image/x-icon" href="media/images/srss-logo.jfif">
</head>
<body>
     <nav class="navigation">
          <div class="title">
               <div class="menubtn"><img src="media/images/icons/menu.png" class="menu" id="menu"></div>
               <span id="heading"><b>Shaaban Robert Secondary School</b></span>
          </div>
          <img src="media/images/srss-og.png" class="logo">
     </nav>
     <div class="body">
          <div class="sidebar">
               <ul type="none">
                    <li><a href="account.html">My Profile</a></li>
                    <li><a href="security.html">Privacy & Security</a></li>
                    <li><a href="user.html">My Account</a></li>
                    <li><b><a href="home.html">Home</a></b></li>
                    <li><a href="index.php">Log-out</a></li>
               </ul>
          </div>
          <div class="main">
               <form action='update-user.php?uname=$uname' method='POST' name='updateUser' class="update" enctype='multipart/form-data'>
                    <fieldset>
                         <legend><b>Username & Email</b></legend>
                         <label><b>Username: </b></label>&nbsp;&nbsp;<?php echo $username;?> &nbsp;&nbsp;<input type="text" name="username"><br>
                         <p id="alert4" class="alert"></p> <br>
                         <label><b>Email: </b></label>&nbsp;&nbsp;<?php echo $email;?> &nbsp;&nbsp;<input type="email" name="email"><br>
                         <p id="alert5" class="alert"></p><br>
                         <button onclick="save2()" class="save" name="send">Save</button>
                    </fieldset>
               </form><br><br>
               <form action="update.php" method="POST" name="upload" class="update" enctype="multipart/form-data">
                    <fieldset>
                         <label><b>Rank: </b></label> <input type='number' name='rank' placeholder='change'><br>
                         <p id='alert4' class='alert'></p><br>
                         <label><b>Codename: </b></label> <input type='text' name='codename' placeholder='change'><br>
                         <p id='alert5' class='alert'></p><br>
                         <button onclick="save()" class="save" name="save">Save</button> 
                    </fieldset>
               </form>
          </div>
          <div class="profile">
               <form name="update" class='update-photo' >
                    <img src="media/images/prof_pics/IMG_20180819_121654 (2).jpg" class='photo' width='200px' height='250px'><br><br>
                    <label><b>Upload your photo: </b></label><input type='file' name="photo" id="pic" onchange="photosize()"><br>
                    <p id="alert6" class='alert'></p><br>
                    <button onclick="photosubmit()" class='save' name='savephoto'>Save</button>                                          
               </form>
          </div>
     </div>
     <div class="otherprofile">
          <a href="account.php?uname=$uname" class="save">Edit your Student's profile.</a>  
     </div>
     <div class="footer">
          <div class="p-icons">
               <a href="ujumbe.php" class="icons-link"><img src="media/icons/live-chat.png" class="icons"></a>
          </div>
          <p>&copy; Shaaban Robert Secondary School 2024.</p>
     </div>
     <script src="account.js"></script>
     <script>
          let result = "*Please fill this field!*";
          let result2 = "*File too large to be submitted!*";

          function photosize(){
               let photo = document.getElementById("pic");
               let returnvalue = true;
               if(document.update.photo.value == ""){
                    document.getElementById("alert6").innerHTML = result;
                    event.preventDefault();
               }
               else{
                    let photoresponse = "*Please, your file should be less than 2MB!*";
                    let size = Math.round((photo.files[0].size)/1024/1024);
                    if(size>2){
                         document.getElementById("alert6").innerHTML = photoresponse;
                         event.preventDefault();
                         returnvalue = false;
                    }
                    else{
                         document.getElementById("alert6").innerHTML = "";
                         returnvalue = true;
                    }
                    return returnvalue;
               }
          }

          function photosubmit(){
               if(document.update.photo.value == ""){
                    document.getElementById("alert6").innerHTML = result;
                    event.preventDefault();
               }
               else{
                    if(!photosize()){
                         document.getElementById("alert6").innerHTML = result2;
                         event.preventDefault();
                    }
                    else{
                         document.getElementById("alert6").innerHTML = result;
                    }
               }
          }
     </script>
</body>
</html>